author:marscheng1

在 CSP 初赛中，我们经常会遇到这样的问题：已知某年某月某日星期几，问另外一个日期是星期几。
这种问题虽然可以手算每年多少天，但是这种方法容易出错，同时如果在复赛的模拟中遇到也不好办。
但是使用蔡勒公式，这类问题便迎刃而解。

## 蔡勒公式

蔡勒公式是用来计算任意日期（格里高利历即现行公历）是星期几的公式，现行公历，其公式如下：

$$
w = (y+\lfloor\frac{y}{4}\rfloor+\lfloor\frac{c}{4}\rfloor-2c+\lfloor\frac{26(m+1)}{10}\rfloor+d-1)\mod 7
$$

其中：

-   $w$：星期几，0 表示星期日，1 表示星期一，2 表示星期二，3 表示星期三，4 表示星期四，5 表示星期五，6 表示星期六。
-   $c$：年份的前两位数，如 2022 年为 20，实现时可以用 $y/100$ 取整。
-   $y$：年份的后两位数，如 2022 年为 22，实现时可以用 $y\mod 100$。
-   $m$：月份，1 月和 2 月要看作上一年的 13 月和 14 月来计算，如 2022 年 2 月 1 日，看成 2021 年 14 月 1 日，实现时要注意它可能会影响 $c$ 和 $y$ 的取值。
-   $d$：日期。

## 示例代码

???+ note "示例代码"
    ```cpp
    int day(int y, int m, int d) {
      // 1 月和 2 月看成上一年的 13 月和 14 月
      if (m == 1 || m == 2) {
        y--;
        m += 12;
      }
      int c = y / 100;
      int yy = y % 100;
      int ans = (yy + yy / 4 + c / 4 - 2 * c + 26 * (m + 1) / 10 + d - 1) % 7;
    #由于 % 的结果可能能为负数，所以需要加 7
      if (ans < 0) ans += 7;
      return ans
    }
    ```


