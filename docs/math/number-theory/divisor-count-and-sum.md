本文讨论约数个数&约数和的计算方法

## 引入

$114$共有几个约数？所有约数的和为多少？

像这样的问题，在不借助计算机时，若规模不大，我们可以暴力枚举。但如果数据为$8000$这种较大的数，就相对困难了。

## 约数个数定理

根据 **唯一分解定理**，我们可以知道，对于任意一个大于1的自然数$Q$都可以被质数的积表示出来，且只有一种表示方法（忽略顺序）

$Q = \prod_{i=1}^{n} P_i^{a_i} = {P_1}^{a_1} \times {P_2}^{a_2} \times {P_3}^{a_3} \times ... \times {P_n}^{a_n}$
那么，对于该数，它的约数个数就可以被表示为
$f(n) = \prod_{i=1}^{n} (a_i+1) = (a_1+1) \times (a_2+1) \times (a_3+1) \times ... \times (a_n+1)$

???+ note "证明"
    $Q$的约数$P_1^{a_1}$共有$a_1+1$个约数，分别为$P_1^0 , P_1^1 , P_1^2 ... P_1^{a_1}$。以此类推，约数$P_i^{a_i}$有$a_i+1$个约数， 根据乘法原理，$Q$的约数共有$(a_1+1) \times (a_2+1) \times (a_3+1) \times ... \times (a_n+1) = \prod_{i=1}^{n}$个。

对于**引入**中的例子，有$8000 = 2^6 \times 5^3$，则$f(8000)=(6+1) \times (3+1) = 28$

## 约数和定理

对于一个大于$1$的正整数$Q$，根据唯一分解定理，其标准分解式为：
$Q = \prod_{i=1}^{n} P_i^{a_i} = P_1^{a_1} \times P_2^{a_2} \times ... \times P_k^{a_k}$

那么，$Q$的所有正约数之和可以表示为：
$\sigma(Q) = (P_1^0 + P_1^1 + P_1^2 + ... + P_1^{a_1}) \times (P_2^0 + P_2^1 + P_2^2 + ... + P_2^{a_2}) \times ... \times (P_k^0 + P_k^1 + P_k^2 + ... + P_k^{a_k})$
或更简洁地写为：
$\sigma(Q) = \prod_{i=1}^{k} \left( \sum_{j=0}^{a_i} P_i^j \right)$

???+ note "证明"
    将$\sigma(Q)$的乘积形式展开：
    $(P_1^0 + P_1^1 + ... + P_1^{a_1}) \times (P_2^0 + P_2^1 + ... + P_2^{a_2}) \times ... \times (P_k^0 + P_k^1 + ... + P_k^{a_k})$
    这个庞大的乘积在展开后，其每一项都具有形式：
    $P_1^{b_1} \times P_2^{b_2} \times ... \times P_k^{b_k}$
    其中$0 \leq b_1 \leq a_1$,$0 \leq b_2 \leq a_2$, ...,$0 \leq b_k \leq a_k$。
    而这**恰好就是$Q$的每一个正约数**。因此，这个乘积展开后的**所有项之和**，自然就是$Q$的**所有正约数之和**。

对于**引入**中的例子，有$8000 = 2^6 \times 5^3$，则$\sigma(8000) = (1 + 2 + 4 + 8 + 16 + 32 + 64) \times (1 + 5 + 25 + 125) = 19812$
