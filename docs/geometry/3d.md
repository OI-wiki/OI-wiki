author: shuzhouliu

## 前置技能

以下内容需要二维计算几何基础、向量、向量积以及空间直角坐标系相关知识，请先熟悉 [向量](../math/vector.md) 和 [二维计算几何基础](./2d.md) 页面的相关内容。

## 元素的记录

### 点

在空间直角坐标系下，点用坐标表示，比如点 $(2,7,23)$ 等。

我们可以记录其在 $x$ 轴，$y$ 轴和 $z$ 轴的坐标值，用结构体表示即可。

### 向量

三维向量的表示与二维向量一样，可以用坐标表示。

三维向量的模和点乘（数量积）可由二维推广得到，此处不再阐述。

#### 三维向量的叉乘

两个向量 $a=(x_1,y_1,z_1)$，$b=(x_2,y_2,z_2)$ 叉积的结果是一个向量 $c$。记作 $c = a \times b$。

我们可以简单的运用行列式表示：

$$
\left |\begin{array}{ccc}
u_x & u_y   & u_z \\
x_1 & y_1 & z_1  \\
x_2 & y_2 & z_2 \\
\end{array}\right |
$$

其中 $u_x, u_y, u_z$ 表示和坐标轴平行的单位向量，并写在对应坐标处。

展开得 $c = (y_1z_2-y_2z_1,x_2z_1-x_1z_2,x_1y_2-x_2y_1)$。

### 极坐标

三维的极坐标可表示为两种：圆柱坐标和球面坐标。

圆柱坐标将极坐标扩展为三维的方式：从应用于平面工作中的二维系统开始，然后添加垂直于该平面的第三轴。

假如将第三轴称为 $z$ 轴，为了找到由圆柱坐标 $(r, \theta, z)$ 所描述的点，可以首先处理 $r$ 和 $\theta$，然后根据 $z$ 坐标“向上”或“向下”移动。

球面坐标可以以以下方法确定：

首先站在原点，面向水平极轴的方向。垂直轴的指向是从脚指向头部。右臂向上，指向垂直极轴方向；逆时针旋转角度 $\theta$；将手臂向下旋转角度 $\varphi$，手臂指向极角 $\theta$ 和 $\varphi$ 指定的方向；沿着该方向从原点移位距离 $r$。到达球面坐标 $(r,\theta,\varphi)$ 所描述的点。

### 直线与射线

同样的，直线和射线可以用向量来表示。

我们考虑一下如何进行空间直线的存储。不难想到一般式、对称式（点向式）和参数方程，但是有点繁琐。

所以我们可以按照 [二维计算几何基础](./2d.md) 中提到的方法也用方向向量表示，即有一个方向向量 $s=(m, n, p)$。于是我们就得到了表示法。

#### 两直线夹角定义与关系充要条件

- 两直线的方向向量的夹角，叫做两直线的夹角。

有了这个命题，我们就可以得出以下结论：已知两条直线 $l_1, l_2$，它们的方向向量分别是 $s_1 (m_1, n_1, p_1)$，$s_2 (m_2, n_2, p_2)$，设 $\varphi$ 为两直线夹角，我们可以得到 $\cos \varphi = \dfrac{\left | m_1m_2+n_1n_2+p_1p_2 \right |}{\sqrt{m_1^2+n_1^2+p_1^2}\sqrt{m_2^2+n_2^2+p_2^2}}$.

- $l_1 \perp l_2 \iff m_1m_2 + n_1n_2 + p_1p_2 = 0$

- $l_1 \parallel l_2 \iff \dfrac{m_1}{m_2} = \dfrac{n_1}{n_2} = \dfrac{p_1}{p_2}$.

### 平面

我们可以用平面上的一点 $P_0(x_0,y_0,z_0)$ 和该平面的法向量（即垂直于该平面的向量）$\mathbf{n}$ 来表示一个平面。

因为 $\mathbf{n}$ 垂直于平面，所以 $\mathbf{n}$ 垂直于该平面内的所有直线。换句话说，设 $\mathbf{n}=(A,B,C)$，则该平面上的点 $P(x,y,z)$ 都满足 $\mathbf{n} \cdot \overrightarrow{PP_0} = 0$。

根据向量点积的定义，上式等价于：

$$
A(x-x_0)+B(y-y_0)+C(z-z_0)=0
$$

整理后得到：

$$
Ax+By+Cz-(Ax_0+By_0+Cz_0)=0
$$

令 $D=-(Ax_0+By_0+Cz_0)$，则上式变成 $Ax+By+Cz+D=0$。我们称这个式子为平面的 **一般式**。

### 三维向量与平面的夹角

> 当直线与平面不垂直时，直线和它在平面上的投影直线的夹角 $\varphi$（$\varphi \in [0, \frac{\pi}{2}]$）称为直线与平面的夹角。
> ——同济大学《高等数学（下）》

设直线向量 $s(m, n, p)$，平面法线向量 $f(a, b, c)$，那么以下命题成立：

- 角度的正弦值：$\sin\varphi = \dfrac{\left | am + bn + cp \right |}{\sqrt{a^2+b^2+c^2}\sqrt{m^2+n^2+p^2}}$

- 直线与平面平行 $\iff am+bn+cp = 0$

- 直线与平面垂直 $\iff \dfrac{a}{m} = \dfrac{b}{n} = \dfrac{c}{p}$

## 立体几何定理

### 三正弦定理

（高中教材人教版《数学》必修第二册（下 A））

设二面角 $M－AB－N$ 的度数为 $\alpha$，在平面 $M$ 上有一条射线 $AC$，它和棱 $AB$ 所成角为 $\beta$，和平面 $N$ 所成的角为 $\gamma$，则 $\sin\gamma = \sin\alpha·\sin\beta$。

### 三余弦定理

设 $O$ 为平面上一点，过平面外一点 $B$ 的直线 $BO$ 在面上的射影为 $AO$，$OC$ 为面上的一条直线，那么 $\angle COB，\angle AOC，\angle AOB$ 三角的余弦关系为：$\cos\angle BOC=\cos\angle AOB·\cos\angle AOC$（$\angle AOC$，$\angle AOB$ 只能是锐角）

## 参考资料与注释

[^3d-basics-1]: [3D 空间基础概念之一：点、向量（矢量）和齐次坐标](https://www.cnblogs.com/CodeBlove/articles/1319563.html)
